
### 데이터 소개 

카드사에서 고객정보를 바탕으로 Segment (고객등급) 을 분류하는 데이터

### 데이터 특징 

월별로 40만개의 행과 8개로 분류된 정보 피쳐들로 병합시 240만행과 약 850개의 피쳐를 갖고있는 커다란 데이터 입니다.

### 신용카드 조 or 나의 데이터 분석 목표

저 or 저희조의 경우 컬럼이 굉장히 많고, 특정 타겟값이 굉장히 적은 불균형 데이터의 특성을 보고 전처리 및 특성엔지니어링에 집중하기로 결정을 하였고
수상자들의 코드를 리뷰한 뒤 직접 다른 파생변수를 만들어봤습니다.

### 수상자의 코드간단 리뷰 및 소개 (2등코드)

2등 수상자들의 경우에 큰 데이터를 처리하기 위해
파일을 카테고리별로 우선 병합한 후에 전처리를 해주고
모든 파일을 병합하는 방법을 사용했습니다.
Segment값이 1.회원정보에만 있기에 2~8번을 처리할때에 항상 segment칼럼을 가져와서 넣어주는 작업을 했습니다.

전체 데이터에 해주는 몇가지 전처리 포인트에 집중

분산이 0인데이터를 삭제해주는 방식은 평범
결측치 처리방식, 이진화 방식, 문자를 수치형으로 변화하는 방식

* 결측치를 '기타' 혹은 '없음' 으로 채워줌 , 중앙값과 최빈값 사용
	데이터마다 결측치가 채워야 하는 값이 아닌, 정보가 없음으로 의미가 있는 경우가 많습니다.
	도메인 지식을 바탕으로 해당 피쳐의 경우 결측치를 다른 방식으로 처리해줍니다.
	금융데이터의 경우 이상치때문에 평균값을 사용하면 위험합니다.
	그렇기에 중앙값이나 최빈값을 사용했습니다.
* True or False 로 나오게끔 처리 - 이진화
	거주지, 직장도시명 같이 여러개로 나뉘는 정보를 수도권인가 아닌가의 여부로 처리해서
	단순하게 만들어 주고, 기존 컬럼을 삭제했습니다.
* 문자열 구간의 수치형 매핑
	금융 데이터에는 '10회 이상', '20회 이상' 같은 구간형 문자열이 많기에 그것을 구간별로 매핑합니다.


A,B의 데이터가 굉장히 적은 불균형데이터기에 A랑 B를 정확히 분류하는 것이 중요하기에 
여러가지 시도를 했습니다.

A등급의 데이터만을 모아 A등급의 최소 기준을 만들고, 해당 기준을 넘는지의 여부를 파생변수로 만들고,
혹은 이용금액을 토대로 A고객들은 기준치 이상의 금액을 일정 기간동안 꾸준히 사용하는것을 발견하고, 기준치 이상의 금액을 사용한 기간에 따라 점수를 부여하는 파생변수를 만들어 모델이 A를 보다 정확하게 분류할 수 있도록 만들었습니다.

모델링에서 A B 의 불균형을 해소하기 위해
* SMOTE를 사용
* A,B에 가중치를 적용
* XGBoost , LightGBM , CatBoost 세가지를 결합한 소프트보팅
기법을 적용하였습니다.

### 내가 만든 파생변수

저는 고객들의 6.채널정보 , 7.마케팅정보 , 8.성과정보 에서 A나 B의 특징을 찾아내
파생 변수를 만들고자 했고,

제가 만든 파생변수 몇 가지 소개해드리겠습니다.

먼저 단일변수와 A,B의 상관성을 파악하여 A,B와 C,D,E를 구분지을만한 파생변수를 생성하려 했습니다.

한도금액의 경우 A~E를 확실하게 구분짓는 계단식 데이터였기에
한도금액과 직접적인 관련이 있는 한도소진율 이라면 A,B를 구분할만한 유의미한 파생변수를 만들어 낼 수 있다는 생각이 들었습니다.

따라서 두가지 변수로 만들어낼만한
세가지 파생변수를 만들었고

우량후보여부는 카드이용한도금액이 A,B는 최소 5만이 된다는점을 이용, 5만을 기준으로 이상은1 이하는 0으로 이진화 했습니다. 0이면 A,B는 아닌겁니다.

실질여유한도는 A와 B를 구분하는 변수로 한도금액이 높을수록, 소진율이 낮을수록 커집니다.
A가 B에비해 한도금액이 크지만, 소진율은 B가 높은것을 극대화 시켜서 보여주는 파생변수입니다.

한도대비 소비성향의 경우에도 소진율에 로그를씌운 한도금액으로 나눠 A와 B에만 유의미한 점수가 나오고 CDE는 inf값이 나오므로 AB를 CDE와 나누는 유의미한 파생변수라고 생각했습니다.

